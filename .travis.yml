sudo: required
dist: xenial
language: generic

os:
  - linux
  - osx

before_install:
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then bash -xe travis/bootstrap-xenial.sh; fi

install:
  - bash -xe travis/install.sh

script:
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then bash -xe travis/build-dmg.sh; fi
  - if [ "$TRAVIS_OS_NAME" == "linux" ]; then cd AppImage; bash -xe galacteek-appimage-build; cd ..; fi
  - wget https://github.com/probonopd/uploadtool/raw/master/upload.sh

after_success:
  - if [ "$TRAVIS_BRANCH" == "master" ]; then bash travis/upload-images.sh; fi

branches:
  except:
    - /^(?i:continuous)$/
